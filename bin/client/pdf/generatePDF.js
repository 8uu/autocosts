function get_main_table(t){for(var e,l,a,s,r=$(t+" td"),n=[],o=0;o<r.length;o++)switch(o){case 0:e={text:gstr(r[o]),colSpan:4,style:"header"},n.push([e,"","",""]);break;case 1:e={text:gstr(r[o]),style:"header"},l={text:gstr(r[o+1]),style:"header"},a={text:gstr(r[o+2]),style:"header"},s={text:gstr(r[o+3]),style:"header"},n.push([e,l,a,s]);break;case 5:case 6:e={text:gstr(r[o]),colSpan:4,style:"header"},n.push([e,"","",""])}return n}function get_monthly_costs_table(t){for(var e,l,a,s=$(t+" td"),r=[],n=0;n<s.length;n+=2)switch(e=gstr(s[n]),n){case 0:l={text:e,colSpan:2,style:"header"},r.push([l,""]),n=-1;break;case 1:a={text:gstr(s[n+1]),style:"header"},l={text:e=e.split("\n")[0],style:"header"},r.push([l,a]);break;case s.length-2:a={text:gstr(s[n+1]),style:"main_total_value"},l={text:e,style:"main_total"},r.push([l,a]),n=s.length;break;default:a={text:gstr(s[n+1]),style:"cell"},l={text:e,style:"cell"},r.push([l,a])}return r}function getBodyFinEffort(t){for(var e,l,a,s=$(t+" td"),r=[],n=0;n<s.length;n++)e=gstr(s[n]),$(s[n]).find("b").length>0?(a={},l={text:e,style:0==n?"header":"header2",colSpan:2},r.push([l,{}])):(a={text:$(s[n+1]).text(),style:"cell"},l={text:e,style:"cell"},r.push([l,a]),n++);return r}function get_publict_table(t){for(var e,l,a,s=$(t+" td"),r=[],n=0;n<s.length;n+=2)e=gstr(s[n]),n<2?(a={text:$(s[n+1]).text().trim(),style:"header"},l={text:e,style:"header"},r.push([l,a])):(a={text:$(s[n+1]).text(),style:"cell"},l={text:e,style:"cell"},r.push([l,a]));return r}function get_uber_table(t){for(var e,l,a,s=$(t+" td"),r=[],n=0;n<s.length;n+=2)e=gstr(s[n]),a={text:$(s[n+1]).text(),style:"cell"},l={text:e,style:"cell"},r.push([l,a]);return r}function gstr(t){var e=$(t).html().replace(new RegExp("<br>","g"),"\n").trim();return e=e.replace(/(<([^>]+)>)/gi,"").replace(new RegExp("&nbsp;","g"),"")}generatePDF=function(){var t,e,l,a,s,r,n,o,i,h,g,d,b,c=WORDS.main_title;t=get_main_table("#result_table0"),e=[[{text:gstr($("#monthly_costs_title").html()),style:"header"}]],l=get_monthly_costs_table("#standing_costs_table"),a=get_monthly_costs_table("#running_costs_table"),s=get_monthly_costs_table("#total_costs_table");var f={header:{text:c,style:"title"},content:[{style:"tableMarging",table:{headerRows:0,widths:["*","*","*","*"],body:t}},{style:"tableMarging",table:{headerRows:0,widths:["*"],body:e}},{image:DISPLAY.charts.URIs.pieChart,width:400,height:267,style:"img_style"},{image:DISPLAY.charts.URIs.barChart,width:400,height:300,style:"img_style",pageBreak:"after"},{style:"tableMarging",table:{headerRows:0,widths:[390,"*"],body:l}},{style:"tableMarging",table:{headerRows:0,widths:[390,"*"],body:a}},{style:"tableMarging",table:{headerRows:0,widths:[390,"*"],body:s}}],styles:{title:{fontSize:14,alignment:"center",margin:[0,10,0,10],bold:!0},header:{fontSize:12,bold:!0,alignment:"center",color:"#000"},total:{fontSize:10,bold:!0,alignment:"right",color:"#000"},main_total:{fontSize:12,bold:!0,alignment:"right",color:"#000"},main_total_value:{fontSize:12,bold:!0,alignment:"left",color:"#000"},cell:{fontSize:10},header2:{fontSize:12,bold:!0,alignment:"left",color:"#000"},tableMarging:{margin:[0,0,0,20],color:"#1C1C1C"},img_style:{alignment:"center"}},defaultStyle:{font:"Roboto"}};DISPLAY.result.fin_effort&&(r={style:"tableMarging",table:{headerRows:0,widths:["*"],body:[[{text:gstr($("#fin_effort_title").html()),style:"header"}]]},pageBreak:"before"},f.content.push(r),DISPLAY.charts.isFinEffortChart&&(n={image:DISPLAY.charts.URIs.finEffort,width:400,height:220,style:"img_style"},f.content.push(n)),o={style:"tableMarging",table:{headerRows:1,widths:[390,"*"],body:getBodyFinEffort("#result_table3")}},f.content.push(o)),(DISPLAY.result.public_transports||DISPLAY.result.uber)&&(i={style:"tableMarging",table:{headerRows:0,widths:["*"],body:[[{text:gstr($("#alternative_to_carcosts_section").html()),style:"header"}]]},pageBreak:"before"},f.content.push(i),DISPLAY.charts.isAlterToCarChart&&(h={image:DISPLAY.charts.URIs.alterToCar,width:400,height:350,style:"img_style"},f.content.push(h)),DISPLAY.result.public_transports&&(g={style:"tableMarging",table:{headerRows:0,widths:[390,"*"],body:get_publict_table("#result_table2")}},f.content.push(g)),DISPLAY.result.uber&&(d={style:"tableMarging",table:{headerRows:0,widths:[390,"*"],body:get_uber_table("#result_table_uber")}},f.content.push(d))),DISPLAY.result.ext_costs&&(b={style:"tableMarging",table:{headerRows:0,widths:[390,"*"],body:get_publict_table("#result_table4")},pageBreak:"before"},f.content.push(b)),"CN"==COUNTRY&&(pdfMake.fonts={Chinese:{normal:"Chinese.ttf",bold:"Chinese.ttf",italics:"Chinese.ttf",bolditalics:"Chinese.ttf"}},f.defaultStyle.font="Chinese"),"JP"==COUNTRY&&(pdfMake.fonts={Japanese:{normal:"Japanese.ttf",bold:"Japanese.ttf",italics:"Japanese.ttf",bolditalics:"Japanese.ttf"}},f.defaultStyle.font="Japanese"),"IN"==COUNTRY&&(pdfMake.fonts={Hindi:{normal:"Hindi.ttf",bold:"Hindi.ttf",italics:"Hindi.ttf",bolditalics:"Hindi.ttf"}},f.defaultStyle.font="Hindi"),console.log(f),pdfMake.createPdf(f).download(c+".pdf")};